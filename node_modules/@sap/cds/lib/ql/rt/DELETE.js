const { CXL, cds, libx } = require('./_helpers')
const $ = Object.assign

// We'll extend and replace these below...
const DELETE = libx.DELETE.from('X').constructor
const delete_where = DELETE.prototype.where


module.exports = cds.extend (DELETE) .with (class {

  static _api() {
    return $((..._) => (this.new).from(..._), {
      from: (..._) => (this.new).from(..._),
    })
  }

  from (target, key) {
    this._.from = this._target_name4 (...arguments)
    if (key) this.byKey (key)
    return this
  }

  where(...args) {
    if (!args[0]) return this
    if (args[0].raw) args = [CXL(...args).xpr]
    return delete_where.apply(this,args)
  }

})
