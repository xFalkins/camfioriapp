"use strict";function peg$subclass(r,t){function e(){this.constructor=r}e.prototype=t.prototype,r.prototype=new e}function peg$SyntaxError(r,t,e,n){this.message=r,this.expected=t,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(r,t){t=void 0!==t?t:{};var e,n={},u={columns:St},s=St,o=function(r,t){r.push(t)},a="*",c=Ct("*",!1),i=Ct(".*",!1),l="as",f=Ct("as",!0),h=(Ct("ASC",!0),Ct("DESC",!0),Ct("NULLS",!0),Ct("FIRST",!0),Ct("LAST",!0),wt("an expression")),p=function(r,t,e){r.push(t,...e)},d=Ct("?",!1),v=":",b=Ct(":",!1),A=Ct("?:",!1),g=function(r,t){return t},C=".",x=Ct(".",!1),w="exists",m=Ct("EXISTS",!0),L=Ct("-",!1),y=Ct("+",!1),E=Ct("!",!1),S=Ct("~",!1),$="||",F=Ct("||",!1),T="&&",R=Ct("&&",!1),I="+=",N=Ct("+=",!1),k="-=",M=Ct("-=",!1),j=/^[*\/%+\-]/,q=xt(["*","/","%","+","-"],!1,!1),z=Ct("IN",!0),B="between",G=Ct("BETWEEN",!0),O="like",U=Ct("LIKE",!0),X="glob",Z=Ct("GLOB",!0),_="match",D=Ct("MATCH",!0),H="regexp",K=Ct("REGEXP",!0),P=Ct("is",!0),W=Ct("not",!0),J=Ct("and",!0),Q=Ct("or",!0),V=Ct("ne",!0),Y="!=",rr=Ct("!=",!1),tr="<>",er=Ct("<>",!1),nr=Ct("eq",!0),ur="==",sr=Ct("==",!1),or=Ct("=",!1),ar=Ct("le",!0),cr="<=",ir=Ct("<=",!1),lr=Ct("lt",!0),fr=Ct("<",!1),hr=Ct("ge",!0),pr=">=",dr=Ct(">=",!1),vr=Ct("gt",!0),br=Ct(">",!1),Ar=wt("a reference"),gr=function(r,t){return t},Cr=wt("a name"),xr=Ct("[",!1),wr="1:",mr=Ct("1:",!1),Lr="where",yr=Ct("where",!1),Er=Ct("]",!1),Sr=function(r,t,e){r[t]=e},$r=wt("a literal value"),Fr="datetime",Tr=Ct("datetime",!1),Rr="timestamp",Ir=Ct("timestamp",!1),Nr="date",kr=Ct("date",!1),Mr="time",jr=Ct("time",!1),qr=/^[+\-]/,zr=xt(["+","-"],!1,!1),Br=Ct("e",!1),Gr=Ct("'",!1),Or="''",Ur=Ct("''",!1),Xr=/^[^']/,Zr=xt(["'"],!0,!1),_r="#",Dr=Ct("#",!1),Hr=Ct("null",!0),Kr="true",Pr=Ct("true",!0),Wr="false",Jr=Ct("false",!0),Qr=wt("#(...)"),Vr=Ct("(",!1),Yr=/^[^()]/,rt=xt(["(",")"],!0,!1),tt=Ct(")",!1),et=wt("("),nt=wt(")"),ut=wt("a colon"),st=wt("a comma"),ot=Ct(",",!1),at=/^[_$A-Za-z0-9]/,ct=xt(["_","$",["A","Z"],["a","z"],["0","9"]],!1,!1),it=/^[0-9]/,lt=xt([["0","9"]],!1,!1),ft=wt(""),ht=/^[ \t\n]/,pt=xt([" ","\t","\n"],!1,!1),dt=0,vt=[{line:1,column:1}],bt=0,At=[],gt=0;if("startRule"in t){if(!(t.startRule in u))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=u[t.startRule]}function Ct(r,t){return{type:"literal",text:r,ignoreCase:t}}function xt(r,t,e){return{type:"class",parts:r,inverted:t,ignoreCase:e}}function wt(r){return{type:"other",description:r}}function mt(t){var e,n=vt[t];if(n)return n;for(e=t-1;!vt[e];)e--;for(n={line:(n=vt[e]).line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return vt[t]=n,n}function Lt(r,t){var e=mt(r),n=mt(t);return{start:{offset:r,line:e.line,column:e.column},end:{offset:t,line:n.line,column:n.column}}}function yt(r){dt<bt||(dt>bt&&(bt=dt,At=[]),At.push(r))}function Et(r,t,e){return new peg$SyntaxError(peg$SyntaxError.buildMessage(r,t),r,t,e)}function St(){var r,t,e,u,s;if(r=dt,t=dt,(e=$t())!==n&&(t,e=[e]),(t=e)!==n){for(e=[],u=dt,Dt()!==n&&(s=$t())!==n?(u,u=o(t,s)):(dt=u,u=n);u!==n;)e.push(u),u=dt,Dt()!==n&&(s=$t())!==n?(u,u=o(t,s)):(dt=u,u=n);e!==n?(r,r=t=t):(dt=r,r=n)}else dt=r,r=n;return r}function $t(){var t,e,u,s,o,a,l,h,p;return 42===r.charCodeAt(dt)?(t="*",dt++):(t=n,0===gt&&yt(c)),t===n&&(t=dt,(e=jt())!==n?(".*"===r.substr(dt,2)?(u=".*",dt+=2):(u=n,0===gt&&yt(i)),u!==n?(t,(p=e).inline=["*"],t=e=p):(dt=t,t=n)):(dt=t,t=n),t===n&&(t=dt,(e=Ft())!==n?(u=dt,s=dt,(o=Pt())!==n?("as"===r.substr(dt,2).toLowerCase()?(a=r.substr(dt,2),dt+=2):(a=n,0===gt&&yt(f)),a!==n&&(l=Pt())!==n?s=o=[o,a,l]:(dt=s,s=n)):(dt=s,s=n),s===n&&(s=Pt()),s!==n&&(o=zt())!==n?(u,h=o,u=s=void(e.as=h)):(dt=u,u=n),u===n&&(u=null),u!==n?(t,t=e=e):(dt=t,t=n)):(dt=t,t=n))),t}function Ft(){var r,t,e,u,s,o,a;if(gt++,r=dt,(t=Tt())!==n){for(e=[],u=dt,(s=kt())===n&&(s=Mt()),s!==n&&(o=Tt())!==n?(u,u=s=p(t,s,o)):(dt=u,u=n);u!==n;)e.push(u),u=dt,(s=kt())===n&&(s=Mt()),s!==n&&(o=Tt())!==n?(u,u=s=p(t,s,o)):(dt=u,u=n);e!==n?(r,r=t=1===(a=t).length?a[0]:{xpr:a}):(dt=r,r=n)}else dt=r,r=n;return gt--,r===n&&(t=n,0===gt&&yt(h)),r}function Tt(){var t,e,u,s,o,a,c,i,h;return t=dt,(e=function(){var t,e,u,s,o;t=dt,Wt()!==n?(e=dt,r.substr(dt,6).toLowerCase()===w?(u=r.substr(dt,6),dt+=6):(u=n,0===gt&&yt(m)),u!==n?(s=dt,gt++,o=Ht(),gt--,o===n?s=void 0:(dt=s,s=n),s!==n?(e,e=u="exists"):(dt=e,e=n)):(dt=e,e=n),e===n&&(e=dt,45===r.charCodeAt(dt)?(u="-",dt++):(u=n,0===gt&&yt(L)),u!==n?(s=dt,gt++,o=Bt(),gt--,o===n?s=void 0:(dt=s,s=n),s!==n?(e,e=u="-"):(dt=e,e=n)):(dt=e,e=n),e===n&&(e=dt,43===r.charCodeAt(dt)?(u="+",dt++):(u=n,0===gt&&yt(y)),u!==n?(s=dt,gt++,o=Bt(),gt--,o===n?s=void 0:(dt=s,s=n),s!==n?(e,e=u="+"):(dt=e,e=n)):(dt=e,e=n),e===n&&(e=dt,33===r.charCodeAt(dt)?(u="!",dt++):(u=n,0===gt&&yt(E)),u!==n&&(e,u="not"),(e=u)===n&&(126===r.charCodeAt(dt)?(e="~",dt++):(e=n,0===gt&&yt(S)),e===n&&(e=Nt()))))),e!==n&&(u=Wt())!==n?(t,t=e):(dt=t,t=n)):(dt=t,t=n);return t}())!==n&&(u=Rt())!==n?(t,t=e=[e,u]):(dt=t,t=n),t===n&&(t=dt,(e=Rt())!==n&&(u=Wt())!==n?(63===r.charCodeAt(dt)?(s="?",dt++):(s=n,0===gt&&yt(d)),s!==n&&(o=Wt())!==n&&(a=Rt())!==n&&Wt()!==n?(58===r.charCodeAt(dt)?(c=":",dt++):(c=n,0===gt&&yt(b)),c!==n&&Wt()!==n&&(i=Rt())!==n?(t,t=e=function(r,t,e){return["case","when",r,"then",t,"else",e,"end"]}(e,a,i)):(dt=t,t=n)):(dt=t,t=n)):(dt=t,t=n),t===n&&(t=dt,(e=Rt())!==n&&(u=Wt())!==n?("?:"===r.substr(dt,2)?(s="?:",dt+=2):(s=n,0===gt&&yt(A)),s!==n&&(o=Wt())!==n&&(a=Rt())!==n?(t,t=e=function(r,t){return[{func:"coalesce",args:[r,t]}]}(e,a)):(dt=t,t=n)):(dt=t,t=n),t===n&&(t=dt,(e=Rt())!==n?((u=It())===n&&(u=null),u!==n?((s=Nt())===n&&(s=null),s!==n&&(o=Ot())!==n?(t,h=e,t=e=s?[h,"is","not","null"]:[h,"is","null"]):(dt=t,t=n)):(dt=t,t=n)):(dt=t,t=n),t===n&&(t=dt,(e=Rt())!==n?((u=Nt())===n&&(u=null),u!==n&&(s=function(){var t,e,u,s,o;t=dt,Wt()!==n?(e=dt,"in"===r.substr(dt,2).toLowerCase()?(u=r.substr(dt,2),dt+=2):(u=n,0===gt&&yt(z)),u===n&&(r.substr(dt,7).toLowerCase()===B?(u=r.substr(dt,7),dt+=7):(u=n,0===gt&&yt(G)),u===n&&(r.substr(dt,4).toLowerCase()===O?(u=r.substr(dt,4),dt+=4):(u=n,0===gt&&yt(U)),u===n&&(r.substr(dt,4).toLowerCase()===X?(u=r.substr(dt,4),dt+=4):(u=n,0===gt&&yt(Z)),u===n&&(r.substr(dt,5).toLowerCase()===_?(u=r.substr(dt,5),dt+=5):(u=n,0===gt&&yt(D)),u===n&&(r.substr(dt,6).toLowerCase()===H?(u=r.substr(dt,6),dt+=6):(u=n,0===gt&&yt(K))))))),u!==n?(s=dt,gt++,o=Ht(),gt--,o===n?s=void 0:(dt=s,s=n),s!==n?(e,e=u=u):(dt=e,e=n)):(dt=e,e=n),e===n&&(e=dt,u=dt,gt++,r.substr(dt,2).toLowerCase()===l?(s=r.substr(dt,2),dt+=2):(s=n,0===gt&&yt(f)),s===n&&(s=kt())===n&&(s=Mt()),gt--,s===n?u=void 0:(dt=u,u=n),u!==n&&(s=zt())!==n?(e,e=u=s):(dt=e,e=n)),e!==n&&(u=Wt())!==n?(t,t=e):(dt=t,t=n)):(dt=t,t=n);return t}())!==n&&(o=Rt())!==n?(t,t=e=function(r,t,e,n){return t?[r,"not",e,n]:[r,e,n]}(e,u,s,o)):(dt=t,t=n)):(dt=t,t=n),t===n&&(t=dt,(e=Rt())!==n&&(u=function(){var t,e;t=dt,Wt()!==n?((e=function(){var t,e,u,s,o;t=dt,e=dt,"ne"===r.substr(dt,2).toLowerCase()?(u=r.substr(dt,2),dt+=2):(u=n,0===gt&&yt(V));u!==n?(s=dt,gt++,o=Ht(),gt--,o===n?s=void 0:(dt=s,s=n),s!==n?e=u=[u,s]:(dt=e,e=n)):(dt=e,e=n);e===n&&(e=dt,(u=It())!==n&&(s=Nt())!==n?e=u=[u,s]:(dt=e,e=n),e===n&&(r.substr(dt,2)===Y?(e=Y,dt+=2):(e=n,0===gt&&yt(rr)),e===n&&(r.substr(dt,2)===tr?(e=tr,dt+=2):(e=n,0===gt&&yt(er)))));e!==n&&(t,e="!=");return t=e}())===n&&(e=function(){var t,e,u,s,o;t=dt,e=dt,"eq"===r.substr(dt,2).toLowerCase()?(u=r.substr(dt,2),dt+=2):(u=n,0===gt&&yt(nr));u!==n?(s=dt,gt++,o=Ht(),gt--,o===n?s=void 0:(dt=s,s=n),s!==n?e=u=[u,s]:(dt=e,e=n)):(dt=e,e=n);e===n&&(e=It())===n&&(r.substr(dt,2)===ur?(e=ur,dt+=2):(e=n,0===gt&&yt(sr)),e===n&&(61===r.charCodeAt(dt)?(e="=",dt++):(e=n,0===gt&&yt(or))));e!==n&&(t,e="=");return t=e}())===n&&(e=function(){var t,e,u,s,o;t=dt,e=dt,"le"===r.substr(dt,2).toLowerCase()?(u=r.substr(dt,2),dt+=2):(u=n,0===gt&&yt(ar));u!==n?(s=dt,gt++,o=Ht(),gt--,o===n?s=void 0:(dt=s,s=n),s!==n?e=u=[u,s]:(dt=e,e=n)):(dt=e,e=n);e===n&&(r.substr(dt,2)===cr?(e=cr,dt+=2):(e=n,0===gt&&yt(ir)));e!==n&&(t,e="<=");return t=e}())===n&&(e=function(){var t,e,u,s,o;t=dt,e=dt,"lt"===r.substr(dt,2).toLowerCase()?(u=r.substr(dt,2),dt+=2):(u=n,0===gt&&yt(lr));u!==n?(s=dt,gt++,o=Ht(),gt--,o===n?s=void 0:(dt=s,s=n),s!==n?e=u=[u,s]:(dt=e,e=n)):(dt=e,e=n);e===n&&(60===r.charCodeAt(dt)?(e="<",dt++):(e=n,0===gt&&yt(fr)));e!==n&&(t,e="<");return t=e}())===n&&(e=function(){var t,e,u,s,o;t=dt,e=dt,"ge"===r.substr(dt,2).toLowerCase()?(u=r.substr(dt,2),dt+=2):(u=n,0===gt&&yt(hr));u!==n?(s=dt,gt++,o=Ht(),gt--,o===n?s=void 0:(dt=s,s=n),s!==n?e=u=[u,s]:(dt=e,e=n)):(dt=e,e=n);e===n&&(r.substr(dt,2)===pr?(e=pr,dt+=2):(e=n,0===gt&&yt(dr)));e!==n&&(t,e=">=");return t=e}())===n&&(e=function(){var t,e,u,s,o;t=dt,e=dt,"gt"===r.substr(dt,2).toLowerCase()?(u=r.substr(dt,2),dt+=2):(u=n,0===gt&&yt(vr));u!==n?(s=dt,gt++,o=Ht(),gt--,o===n?s=void 0:(dt=s,s=n),s!==n?e=u=[u,s]:(dt=e,e=n)):(dt=e,e=n);e===n&&(62===r.charCodeAt(dt)?(e=">",dt++):(e=n,0===gt&&yt(br)));e!==n&&(t,e=">");return t=e}())===n&&(r.substr(dt,2)===$?(e=$,dt+=2):(e=n,0===gt&&yt(F)),e===n&&(r.substr(dt,2)===T?(e=T,dt+=2):(e=n,0===gt&&yt(R)),e===n&&(r.substr(dt,2)===I?(e=I,dt+=2):(e=n,0===gt&&yt(N)),e===n&&(r.substr(dt,2)===k?(e=k,dt+=2):(e=n,0===gt&&yt(M)),e===n&&(j.test(r.charAt(dt))?(e=r.charAt(dt),dt++):(e=n,0===gt&&yt(q))))))),e!==n&&Wt()!==n?(t,t=e):(dt=t,t=n)):(dt=t,t=n);return t}())!==n&&(s=Rt())!==n?(t,t=e=function(r,t,e){return[r,t,e]}(e,u,s)):(dt=t,t=n),t===n&&(t=dt,(e=Rt())!==n&&(t,e=function(r){return[r]}(e)),t=e)))))),t}function Rt(){var t,e;return t=dt,Xt()!==n&&(e=Ft())!==n&&Zt()!==n?(t,t=e):(dt=t,t=n),t===n&&(t=function(){var t,e,u,s,o,i,l,f;if(t=dt,e=dt,u=dt,(s=zt())!==n){for(o=[],i=dt,46===r.charCodeAt(dt)?(l=C,dt++):(l=n,0===gt&&yt(x)),l===n&&(l=null),l!==n&&(f=zt())!==n?i=l=[l,f]:(dt=i,i=n);i!==n;)o.push(i),i=dt,46===r.charCodeAt(dt)?(l=C,dt++):(l=n,0===gt&&yt(x)),l===n&&(l=null),l!==n&&(f=zt())!==n?i=l=[l,f]:(dt=i,i=n);o!==n?u=s=[s,o]:(dt=u,u=n)}else dt=u,u=n;e=u!==n?r.substring(e,dt):u;e!==n&&(u=function(){var t,e,u;t=dt,Xt()!==n?(e=dt,42===r.charCodeAt(dt)?(u=a,dt++):(u=n,0===gt&&yt(c)),u!==n&&(e,u=["*"]),(e=u)===n&&(e=function(){var r,t,e,u,s,o,a;r=dt,t=dt,(e=zt())!==n&&(u=_t())!==n&&(s=Ft())!==n?(t,t=e={[e]:s}):(dt=t,t=n);if(t!==n){for(e=[],u=dt,(s=Dt())!==n&&(o=zt())!==n&&_t()!==n&&(a=Ft())!==n?(u,u=s=Sr(t,o,a)):(dt=u,u=n);u!==n;)e.push(u),u=dt,(s=Dt())!==n&&(o=zt())!==n&&_t()!==n&&(a=Ft())!==n?(u,u=s=Sr(t,o,a)):(dt=u,u=n);e!==n?(r,r=t=t):(dt=r,r=n)}else dt=r,r=n;return r}())===n&&(e=function(){var r,t,e,u,s;if(r=dt,(t=Ft())!==n){for(e=[],u=dt,Dt()!==n&&(s=Ft())!==n?(u,u=g(0,s)):(dt=u,u=n);u!==n;)e.push(u),u=dt,Dt()!==n&&(s=Ft())!==n?(u,u=g(0,s)):(dt=u,u=n);e!==n?(r,o=e,r=t=[t,...o]):(dt=r,r=n)}else dt=r,r=n;var o;return r}())===n&&(e=dt,(u="")!==n&&(e,u=[]),e=u),e!==n&&(u=Zt())!==n?(t,t=e):(dt=t,t=n)):(dt=t,t=n);return t}())!==n?(t,t=e={func:e,args:u}):(dt=t,t=n);return t}())===n&&(t=function(){var t,e,u;gt++,t=dt,(e=function(){var t;r.substr(dt,8)===Fr?(t=Fr,dt+=8):(t=n,0===gt&&yt(Tr));t===n&&(r.substr(dt,9)===Rr?(t=Rr,dt+=9):(t=n,0===gt&&yt(Ir)),t===n&&(r.substr(dt,4)===Nr?(t=Nr,dt+=4):(t=n,0===gt&&yt(kr)),t===n&&(r.substr(dt,4)===Mr?(t=Mr,dt+=4):(t=n,0===gt&&yt(jr)))));return t}())!==n&&(u=Gt())!==n?(t,t=e={val:u,literal:e}):(dt=t,t=n);t===n&&(t=dt,(e=function(){var t;(t=function(){var t,e,u,s;t=dt,r.substr(dt,4).toLowerCase()===Kr?(e=r.substr(dt,4),dt+=4):(e=n,0===gt&&yt(Pr));e!==n?(u=dt,gt++,s=Ht(),gt--,s===n?u=void 0:(dt=u,u=n),u!==n?(t,t=e=!0):(dt=t,t=n)):(dt=t,t=n);return t}())===n&&(t=function(){var t,e,u,s;t=dt,r.substr(dt,5).toLowerCase()===Wr?(e=r.substr(dt,5),dt+=5):(e=n,0===gt&&yt(Jr));e!==n?(u=dt,gt++,s=Ht(),gt--,s===n?u=void 0:(dt=u,u=n),u!==n?(t,t=e=!1):(dt=t,t=n)):(dt=t,t=n);return t}())===n&&(t=Ot())===n&&(t=Bt())===n&&(t=Gt())===n&&(t=function(){var t,e,u;t=dt,35===r.charCodeAt(dt)?(e="#",dt++):(e=n,0===gt&&yt(Dr));e!==n&&(u=zt())!==n?(t,t=e={"#":u}):(dt=t,t=n);return t}());return t}())!==n&&(t,e=function(r){return{val:r}}(e)),t=e);gt--,t===n&&(e=n,0===gt&&yt($r));return t}())===n&&(t=jt())===n&&(t=function(){var r,t,e,u,s;if(r=dt,Xt()!==n)if((t=Ft())!==n){for(e=[],u=dt,Dt()!==n&&(s=Ft())!==n?(u,u=g(0,s)):(dt=u,u=n);u!==n;)e.push(u),u=dt,Dt()!==n&&(s=Ft())!==n?(u,u=g(0,s)):(dt=u,u=n);e!==n&&(u=Zt())!==n?(r,o=e,r={list:[t,...o]}):(dt=r,r=n)}else dt=r,r=n;else dt=r,r=n;var o;return r}())===n&&(t=function(){var t,e,u;t=dt,58===r.charCodeAt(dt)?(e=v,dt++):(e=n,0===gt&&yt(b));e!==n?((u=zt())===n&&(u=Bt()),u!==n?(t,t=e={param:!0,ref:[u]}):(dt=t,t=n)):(dt=t,t=n);t===n&&(t=dt,63===r.charCodeAt(dt)?(e="?",dt++):(e=n,0===gt&&yt(d)),e!==n&&(t,e={param:!0,ref:["?"]}),t=e);return t}())===n&&(t=function(){var t,e,u;gt++,t=dt,35===r.charCodeAt(dt)?(e=_r,dt++):(e=n,0===gt&&yt(Dr));e!==n&&(u=Ut())!==n?(t,s=u,t=e=Object.assign(String(s.trim()),{unparsed:!0})):(dt=t,t=n);var s;gt--,t===n&&(e=n,0===gt&&yt(Qr));return t}()),t}function It(){var t,e,u,s;return t=dt,Wt()!==n?("is"===r.substr(dt,2).toLowerCase()?(e=r.substr(dt,2),dt+=2):(e=n,0===gt&&yt(P)),e!==n?(u=dt,gt++,s=Ht(),gt--,s===n?u=void 0:(dt=u,u=n),u!==n&&(s=Wt())!==n?(t,t="is"):(dt=t,t=n)):(dt=t,t=n)):(dt=t,t=n),t}function Nt(){var t,e,u,s;return t=dt,Wt()!==n?("not"===r.substr(dt,3).toLowerCase()?(e=r.substr(dt,3),dt+=3):(e=n,0===gt&&yt(W)),e!==n?(u=dt,gt++,s=Ht(),gt--,s===n?u=void 0:(dt=u,u=n),u!==n&&(s=Wt())!==n?(t,t="not"):(dt=t,t=n)):(dt=t,t=n)):(dt=t,t=n),t}function kt(){var t,e,u,s;return t=dt,Wt()!==n?("and"===r.substr(dt,3).toLowerCase()?(e=r.substr(dt,3),dt+=3):(e=n,0===gt&&yt(J)),e!==n?(u=dt,gt++,s=Ht(),gt--,s===n?u=void 0:(dt=u,u=n),u!==n&&(s=Wt())!==n?(t,t="and"):(dt=t,t=n)):(dt=t,t=n)):(dt=t,t=n),t}function Mt(){var t,e,u,s;return t=dt,Wt()!==n?("or"===r.substr(dt,2).toLowerCase()?(e=r.substr(dt,2),dt+=2):(e=n,0===gt&&yt(Q)),e!==n?(u=dt,gt++,s=Ht(),gt--,s===n?u=void 0:(dt=u,u=n),u!==n&&(s=Wt())!==n?(t,t="or"):(dt=t,t=n)):(dt=t,t=n)):(dt=t,t=n),t}function jt(){var t,e,u,s,o,a,c,i;if(gt++,t=dt,(e=qt())!==n){for(u=[],s=dt,Wt()!==n?(46===r.charCodeAt(dt)?(o=C,dt++):(o=n,0===gt&&yt(x)),o!==n?((a=Wt())===n&&(a=null),a!==n&&(c=qt())!==n?(s,s=gr(0,c)):(dt=s,s=n)):(dt=s,s=n)):(dt=s,s=n);s!==n;)u.push(s),s=dt,Wt()!==n?(46===r.charCodeAt(dt)?(o=C,dt++):(o=n,0===gt&&yt(x)),o!==n?((a=Wt())===n&&(a=null),a!==n&&(c=qt())!==n?(s,s=gr(0,c)):(dt=s,s=n)):(dt=s,s=n)):(dt=s,s=n);u!==n?(t,i=u,t=e={ref:[e,...i]}):(dt=t,t=n)}else dt=t,t=n;return gt--,t===n&&(e=n,0===gt&&yt(Ar)),t}function qt(){var t,e,u,s,o;return t=dt,(e=zt())!==n?((u=function(){var t,e,u,s,o,i,l;t=dt,Wt()!==n?(91===r.charCodeAt(dt)?(e="[",dt++):(e=n,0===gt&&yt(xr)),e!==n&&Wt()!==n?(r.substr(dt,2)===wr?(u=wr,dt+=2):(u=n,0===gt&&yt(mr)),u===n&&(u=null),u!==n&&Wt()!==n?(s=dt,r.substr(dt,5)===Lr?(o=Lr,dt+=5):(o=n,0===gt&&yt(yr)),o!==n&&(i=Pt())!==n?s=o=[o,i]:(dt=s,s=n),s===n&&(s=null),s!==n?((o=Ft())===n&&(42===r.charCodeAt(dt)?(o=a,dt++):(o=n,0===gt&&yt(c))),o===n&&(o=null),o!==n&&(i=Wt())!==n?(93===r.charCodeAt(dt)?(l="]",dt++):(l=n,0===gt&&yt(Er)),l!==n?(t,t=function(r,t){let e={where:t};return r&&(e.cardinality={max:1}),e}(u,o)):(dt=t,t=n)):(dt=t,t=n)):(dt=t,t=n)):(dt=t,t=n)):(dt=t,t=n)):(dt=t,t=n);return t}())===n&&(u=null),u!==n?(t,s=e,t=e=(o=u)?{id:s,...o}:s):(dt=t,t=n)):(dt=t,t=n),t}function zt(){var t,e,u,s,o;if(gt++,t=dt,e=dt,u=dt,gt++,s=Kt(),gt--,s===n?u=void 0:(dt=u,u=n),u!==n){if(s=[],(o=Ht())!==n)for(;o!==n;)s.push(o),o=Ht();else s=n;s!==n?e=u=[u,s]:(dt=e,e=n)}else dt=e,e=n;return t=e!==n?r.substring(t,dt):e,gt--,t===n&&(e=n,0===gt&&yt(Cr)),t}function Bt(){var t,e,u,s,o,a,c,i,l,f,h;if(t=dt,e=dt,u=dt,qr.test(r.charAt(dt))?(s=r.charAt(dt),dt++):(s=n,0===gt&&yt(zr)),s===n&&(s=null),s!==n){if(o=[],(a=Kt())!==n)for(;a!==n;)o.push(a),a=Kt();else o=n;if(o!==n){if(a=dt,46===r.charCodeAt(dt)?(c=C,dt++):(c=n,0===gt&&yt(x)),c!==n){if(i=[],(l=Kt())!==n)for(;l!==n;)i.push(l),l=Kt();else i=n;i!==n?a=c=[c,i]:(dt=a,a=n)}else dt=a,a=n;if(a===n&&(a=null),a!==n){if(c=dt,101===r.charCodeAt(dt)?(i="e",dt++):(i=n,0===gt&&yt(Br)),i!==n)if(qr.test(r.charAt(dt))?(l=r.charAt(dt),dt++):(l=n,0===gt&&yt(zr)),l===n&&(l=null),l!==n){if(f=[],(h=Kt())!==n)for(;h!==n;)f.push(h),h=Kt();else f=n;f!==n?c=i=[i,l,f]:(dt=c,c=n)}else dt=c,c=n;else dt=c,c=n;c===n&&(c=null),c!==n?u=s=[s,o,a,c]:(dt=u,u=n)}else dt=u,u=n}else dt=u,u=n}else dt=u,u=n;return(e=u!==n?r.substring(e,dt):u)!==n&&(t,e=Number(e)),t=e}function Gt(){var t,e,u,s,o;if(t=dt,39===r.charCodeAt(dt)?(e="'",dt++):(e=n,0===gt&&yt(Gr)),e!==n){for(u=dt,s=[],r.substr(dt,2)===Or?(o=Or,dt+=2):(o=n,0===gt&&yt(Ur)),o===n&&(Xr.test(r.charAt(dt))?(o=r.charAt(dt),dt++):(o=n,0===gt&&yt(Zr)));o!==n;)s.push(o),r.substr(dt,2)===Or?(o=Or,dt+=2):(o=n,0===gt&&yt(Ur)),o===n&&(Xr.test(r.charAt(dt))?(o=r.charAt(dt),dt++):(o=n,0===gt&&yt(Zr)));(u=s!==n?r.substring(u,dt):s)!==n?(39===r.charCodeAt(dt)?(s="'",dt++):(s=n,0===gt&&yt(Gr)),s!==n?(t,t=e=u.replace(/''/g,"'")):(dt=t,t=n)):(dt=t,t=n)}else dt=t,t=n;return t}function Ot(){var t,e,u,s;return t=dt,"null"===r.substr(dt,4).toLowerCase()?(e=r.substr(dt,4),dt+=4):(e=n,0===gt&&yt(Hr)),e!==n?(u=dt,gt++,s=Ht(),gt--,s===n?u=void 0:(dt=u,u=n),u!==n?(t,t=e=null):(dt=t,t=n)):(dt=t,t=n),t}function Ut(){var t,e,u,s,o;if(t=dt,40===r.charCodeAt(dt)?(e="(",dt++):(e=n,0===gt&&yt(Vr)),e!==n){for(u=dt,s=[],Yr.test(r.charAt(dt))?(o=r.charAt(dt),dt++):(o=n,0===gt&&yt(rt)),o===n&&(o=Ut());o!==n;)s.push(o),Yr.test(r.charAt(dt))?(o=r.charAt(dt),dt++):(o=n,0===gt&&yt(rt)),o===n&&(o=Ut());(u=s!==n?r.substring(u,dt):s)!==n?(41===r.charCodeAt(dt)?(s=")",dt++):(s=n,0===gt&&yt(tt)),s!==n&&(o=Wt())!==n?(t,t=e=u):(dt=t,t=n)):(dt=t,t=n)}else dt=t,t=n;return t}function Xt(){var t,e;return gt++,t=dt,Wt()!==n?(40===r.charCodeAt(dt)?(e="(",dt++):(e=n,0===gt&&yt(Vr)),e!==n&&Wt()!==n?(t,t="("):(dt=t,t=n)):(dt=t,t=n),gt--,t===n&&(n,0===gt&&yt(et)),t}function Zt(){var t,e;return gt++,t=dt,Wt()!==n?(41===r.charCodeAt(dt)?(e=")",dt++):(e=n,0===gt&&yt(tt)),e!==n?(t,t=")"):(dt=t,t=n)):(dt=t,t=n),gt--,t===n&&(n,0===gt&&yt(nt)),t}function _t(){var t,e;return gt++,t=dt,Wt()!==n?(58===r.charCodeAt(dt)?(e=v,dt++):(e=n,0===gt&&yt(b)),e!==n&&Wt()!==n?(t,t=":"):(dt=t,t=n)):(dt=t,t=n),gt--,t===n&&(n,0===gt&&yt(ut)),t}function Dt(){var t,e;return gt++,t=dt,Wt()!==n?(44===r.charCodeAt(dt)?(e=",",dt++):(e=n,0===gt&&yt(ot)),e!==n&&Wt()!==n?(t,t=","):(dt=t,t=n)):(dt=t,t=n),gt--,t===n&&(n,0===gt&&yt(st)),t}function Ht(){var t;return at.test(r.charAt(dt))?(t=r.charAt(dt),dt++):(t=n,0===gt&&yt(ct)),t}function Kt(){var t;return it.test(r.charAt(dt))?(t=r.charAt(dt),dt++):(t=n,0===gt&&yt(lt)),t}function Pt(){var t,e;if(gt++,t=[],ht.test(r.charAt(dt))?(e=r.charAt(dt),dt++):(e=n,0===gt&&yt(pt)),e!==n)for(;e!==n;)t.push(e),ht.test(r.charAt(dt))?(e=r.charAt(dt),dt++):(e=n,0===gt&&yt(pt));else t=n;return gt--,t===n&&(e=n,0===gt&&yt(ft)),t}function Wt(){var t,e;for(gt++,t=[],ht.test(r.charAt(dt))?(e=r.charAt(dt),dt++):(e=n,0===gt&&yt(pt));e!==n;)t.push(e),ht.test(r.charAt(dt))?(e=r.charAt(dt),dt++):(e=n,0===gt&&yt(pt));return gt--,t===n&&(e=n,0===gt&&yt(ft)),t}if((e=s())!==n&&dt===r.length)return e;throw e!==n&&dt<r.length&&yt({type:"end"}),Et(At,bt<r.length?r.charAt(bt):null,bt<r.length?Lt(bt,bt+1):Lt(bt,bt))}peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(r,t){var e={literal:function(r){return'"'+u(r.text)+'"'},class:function(r){var t,e="";for(t=0;t<r.parts.length;t++)e+=r.parts[t]instanceof Array?s(r.parts[t][0])+"-"+s(r.parts[t][1]):s(r.parts[t]);return"["+(r.inverted?"^":"")+e+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function u(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}function s(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}return"Expected "+function(r){var t,n,u,s=new Array(r.length);for(t=0;t<r.length;t++)s[t]=(u=r[t],e[u.type](u));if(s.sort(),s.length>0){for(t=1,n=1;t<s.length;t++)s[t-1]!==s[t]&&(s[n]=s[t],n++);s.length=n}switch(s.length){case 1:return s[0];case 2:return s[0]+" or "+s[1];default:return s.slice(0,-1).join(", ")+", or "+s[s.length-1]}}(r)+" but "+function(r){return r?'"'+u(r)+'"':"end of input"}(t)+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse};
