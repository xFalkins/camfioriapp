const { resolveView } = require('../utils/resolveView')

module.exports = function () {
  function _handler(req, next) {
    req.query = resolveView(req.query, this.model, 'app', true)
    return next()
  }
  if (this.mocked) this.on(['CREATE', 'READ', 'UPDATE', 'DELETE'], '*', _handler)
}
